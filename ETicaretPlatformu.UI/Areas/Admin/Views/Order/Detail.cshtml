@using ETicaretPlatformu.Application.Models.DTOs.OrderDto
@using ETicaretPlatformu.Domain.Entities
@model UpdateOrderDto
@{
    ViewData["Title"] = "Detail";
}

<h1>Detail</h1>

<style>
    .readonly-input {
        background-color: #f2f2f2;
        pointer-events: none;
    }
</style>

<body class="bg-primary">
    <div>
        <div>
            <main>
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-9">
                            <div class="card shadow-lg border-0 rounded-lg mt-5">
                                <div class="card-header"><h3 class="text-center font-weight-light my-4" style="color: #1488e1;">Detail</h3></div>
                                <div class="card-body">

                                    <div class="detail-item">
                                        <span class="label  fw-bold">ID:</span>
                                        <span class="value">@Model.Id</span>
                                    </div>

                                    <div class="detail-item ">
                                        <span class="label  fw-bold">User:</span>
                                        <span class="value">@Model.User.UserName</span>
                                    </div>


                                    <div class="detail-item avatar-group">
                                        <span class="label fw-bold">Products:</span>
                                        <br />
                                        @{
                                            decimal totalPrice = 0;
                                        }
                                        @foreach (OrderDetail detail in Model.OrderDetails)
                                        {
                                            decimal price = detail.Product.Price * detail.Quantity; 
                                            totalPrice += price;
                                            <span class="value">
                                                <img src="@detail.Product.ImagePath" class="img rounded-circle " style="width:24px" />
                                                @detail.Product.Name x @detail.Quantity $@price.ToString("F1")
                                            </span>
                                            <br />
                                        }
                                    </div>


                                    <div class="detail-item">
                                        <span class="label fw-bold">Total price:</span>
                                        <span class="value">$@totalPrice</span>
                                    </div>

                                </div>
                                <div class="card-footer text-center py-3">
                                    <a class="btn btn-success" asp-area="Admin" asp-controller="Order" asp-action="Update" asp-route-id=@Model.Id>Save</a>
                                    <a class="btn btn-primary" asp-area="Admin" asp-controller="Order" asp-action="Index">Back to list</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        @*  <script src="/sb-admin-2/js/scripts.js"></script> *@

        <!-- Visual Studio Browser Link -->
        @* <script type="text/javascript" src="/_vs/browserLink" async="async" id="__browserLink_initializationData" data-requestId="ef763705b4fb4e1e80c939d295980225" data-requestMappingFromServer="false" data-connectUrl="http://localhost:65104/dd4c240f816d49f3858ae429cf67fc54/browserLink"></script>
        <!-- End Browser Link -->
        <script src="/_framework/aspnetcore-browser-refresh.js"></script> *@
</body>
